f={case[p,q]->p}
g={case[i,s]->if(i==0)""else g([i-1,s])+s}
stdin|reduce(["",""],{case[c,d],s->if(c.length>0){v=s.split("K");if(v.length>=2)d+"\n"+f(v)+g([f(c.split("T")).length-f(v).length+1,"A"])else[c,d+"\n"+c]}else[s,s]})|stdout